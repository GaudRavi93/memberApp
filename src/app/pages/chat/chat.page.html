<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="ion-text-center">Chat</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ng-container *ngIf="!isLoading">
    <div *ngFor="let channel of channel_list" class="list-conversation">
      <div class="card-inner">
        <!-- display the conversation list -->
        <div class="main-name-group">
          <div>
            <div class="profile-image-wrapper">
              <div class="profile-inner">
                <img [src]="channel.data?.image" onerror="this.src='../../../assets/no_user.png'" height="80" width="80"
                  class="profile-image">
                <div class="count" *ngIf="(channel.state.unreadCount) > 0">{{channel.state?.unreadCount}}</div>
              </div>
            </div>
            <ion-label class="main-heading">
              {{channel.data?.name}}
            </ion-label>
          </div>
          <div class="card-content" *ngIf="channel.data?.name !== 'Conversation with Offshift'">
            <p> Your Coach is available to answer all your questions. Feel Free to ask him. </p>
          </div>
          <div class="card-content" *ngIf="channel.data?.name == 'Conversation with Offshift'">
            <p> Offshift is the conversation with a Bot, you can see all the announcements here. </p>
          </div>
          <ion-button expand="block" (click)="openChannel(channel)">Open Conversation</ion-button>
        </div>
      </div>
    </div>
  </ng-container>
  
  <ng-container *ngIf="isLoading">
    <!-- skeleton start-->
    <div class="list-conversation">
      <div class="card-inner">
        <div class="main-name-group">
          <div>
            <div class="profile-image-wrapper">
              <div class="profile-inner">
                <ion-skeleton-text [animated]="true" style="width: 80px;height: 80px"
                  class="profile-image"></ion-skeleton-text>
              </div>
            </div>
            <ion-label class="main-heading">
              <ion-skeleton-text [animated]="true" style="width: 80px;height: 20px"></ion-skeleton-text>
            </ion-label>
          </div>
          <div class="card-content">
            <ion-skeleton-text [animated]="true" style="width: 100%;height: 20px"></ion-skeleton-text>
          </div>
          <ion-skeleton-text [animated]="true" style="width: 100%;height: 60px"></ion-skeleton-text>
        </div>
      </div>
    </div>
  </ng-container>
</ion-content>